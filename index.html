<!DOCTYPE html>

<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <meta
      content="default-src 'self' 'unsafe-inline' 'unsafe-eval'; worker-src 'self' blob:;"
      http-equiv="Content-Security-Policy"
    />
    <title>Mutuelle Calculateur</title>

    <link href="style.css" rel="stylesheet" />
  </head>
  <body>
    <div class="container">
      <div class="card">
        <div class="header">
          <h1>üè• Mutuelle Calculateur</h1>
          <p>
            Calculez et analysez vos remboursements de mutuelle en toute
            confidentialit√©
          </p>
        </div>
        <div class="privacy-notice" id="confidentialityNotice">
          <strong>üîí Confidentialit√© garantie :</strong> Vos documents sont
          trait√©s localement dans votre navigateur. Aucune information
          personnelle n'est transmise.
        </div>
        <div
          class="privacy-notice"
          id="descriptionNotice"
          style="
            background: #e8f5e8;
            color: #2d5016;
            border-left-color: #68d391;
          "
        >
          <strong>üéØ √Ä quoi sert ce calculateur ?</strong>
          <div style="margin-top: 10px">
            Cette application calcule et analyse vos relev√©s de mutuelle pour
            d√©terminer automatiquement si votre mutuelle vous fait gagner ou
            perdre de l'argent. Elle compare vos cotisations annuelles avec les
            remboursements re√ßus pour vous donner un verdict clair :
            <strong>√ätes-vous gagnant ou perdant avec votre mutuelle ?</strong>
          </div>
          <div style="margin-top: 10px">
            L'outil g√©n√®re des graphiques d√©taill√©s, calcule vos d√©ficits ou
            b√©n√©fices par ann√©e, et vous aide √† prendre des d√©cisions √©clair√©es
            sur votre couverture sant√©.
          </div>
        </div>
        <div
          class="privacy-notice"
          id="instructionsNotice"
          style="
            background: #fff3cd;
            color: #856404;
            border-left-color: #ffc107;
          "
        >
          <strong>üìã Mode d'emploi :</strong>
          <div style="margin-top: 10px">
            <div>
              <strong>√âtape 1 :</strong> Connectez-vous sur votre espace
              mutuelle
            </div>
            <div style="margin-top: 5px">
              <strong>√âtape 2 :</strong> T√©l√©chargez tous vos remboursements et
              prestations vers√©es directement aux professionnels de sant√©
            </div>
            <div style="margin-top: 5px">
              <strong>√âtape 3 :</strong> Glissez votre relev√© mutuelle
              ci-dessous
            </div>
          </div>
        </div>
        <div class="upload-section" id="uploadSection">
          <div
            class="upload-zone"
            onclick="document.getElementById('fileInput').click()"
            ondragleave="handleDragLeave(event)"
            ondragover="handleDragOver(event)"
            ondrop="handleDrop(event)"
          >
            <div class="upload-icon">üìÑ</div>
            <div class="upload-text">Glissez votre relev√© de mutuelle ici</div>
            <div class="upload-subtext">
              ou cliquez pour s√©lectionner un fichier PDF
            </div>
          </div>
          <input
            accept=".pdf"
            id="fileInput"
            onchange="handleFileSelect(event)"
            type="file"
          />
          <button
            class="btn"
            onclick="document.getElementById('fileInput').click()"
          >
            Choisir un fichier
          </button>
        </div>
        <div class="loading" id="loadingSection">
          <div class="spinner"></div>
          <p>Analyse du document en cours...</p>
        </div>
        <div class="results-section" id="resultsSection">
          <div class="tabs">
            <button class="tab active" onclick="switchTab('remboursements')">
              Remboursements
            </button>
            <button class="tab" onclick="switchTab('cotisations')">
              Cotisations
            </button>
            <button class="tab" onclick="switchTab('analytics')">
              Synth√®se
            </button>
          </div>
          <div class="tab-content active" id="remboursementsTab">
            <div class="privacy-notice" style="margin-bottom: 20px">
              <strong>‚ÑπÔ∏è Information importante :</strong> Les remboursements
              incluent aussi les prestations pay√©es aux Professionnels de Sant√©
              si elles sont pr√©sentes sur le document fourni.
            </div>
            <div class="details-table">
              <div class="table-controls">
                <label>Trier par date :</label>
                <button class="btn btn-small" onclick="sortTable('asc')">
                  ‚Üë Croissant
                </button>
                <button class="btn btn-small" onclick="sortTable('desc')">
                  ‚Üì D√©croissant
                </button>
              </div>
              <table id="detailsTable">
                <thead>
                  <tr>
                    <th onclick="sortTable('date')">Date</th>
                    <th>Remboursements S√©curit√© Sociale</th>
                    <th>Remboursements Mutuelle</th>
                    <th>Total</th>
                  </tr>
                </thead>
                <tbody>
                  <!-- Details will be inserted here -->
                </tbody>
              </table>
            </div>
          </div>
          <div class="tab-content" id="cotisationsTab">
            <div id="cotisationsContent">
              <!-- Cotisations form will be inserted here -->
            </div>
          </div>
          <div class="tab-content" id="analyticsTab">
            <div id="analyticsContent">
              <!-- Analytics will be inserted here -->
            </div>
            <div style="text-align: center; margin-top: 20px">
              <button class="btn" onclick="resetApp()">
                üîÑ Analyser un nouveau fichier
              </button>
            </div>
          </div>
        </div>
        <div class="download-status" id="downloadStatus">
          PDF g√©n√©r√© avec succ√®s !
        </div>
      </div>
      <footer
        style="
          text-align: center;
          margin-top: 40px;
          padding: 20px;
          background: rgba(255, 255, 255, 0.1);
          border-radius: 15px;
          backdrop-filter: blur(10px);
        "
      >
        <div style="color: rgba(255, 255, 255, 0.9); font-size: 14px">
          <a
            href="mentions.html"
            onmouseout="this.style.background='rgba(255,255,255,0.1)'"
            onmouseover="this.style.background='rgba(255,255,255,0.2)'"
            style="
              color: rgba(255, 255, 255, 0.9);
              text-decoration: none;
              margin: 0 10px;
              padding: 8px 12px;
              background: rgba(255, 255, 255, 0.1);
              border-radius: 5px;
              transition: all 0.3s ease;
            "
            >Mentions l√©gales</a
          >
          <span style="color: rgba(255, 255, 255, 0.5)">|</span>
          <a
            href="confidentialite.html"
            onmouseout="this.style.background='rgba(255,255,255,0.1)'"
            onmouseover="this.style.background='rgba(255,255,255,0.2)'"
            style="
              color: rgba(255, 255, 255, 0.9);
              text-decoration: none;
              margin: 0 10px;
              padding: 8px 12px;
              background: rgba(255, 255, 255, 0.1);
              border-radius: 5px;
              transition: all 0.3s ease;
            "
            >Confidentialit√©</a
          >
          <span style="color: rgba(255, 255, 255, 0.5)">|</span>
          <a
            href="cgu.html"
            onmouseout="this.style.background='rgba(255,255,255,0.1)'"
            onmouseover="this.style.background='rgba(255,255,255,0.2)'"
            style="
              color: rgba(255, 255, 255, 0.9);
              text-decoration: none;
              margin: 0 10px;
              padding: 8px 12px;
              background: rgba(255, 255, 255, 0.1);
              border-radius: 5px;
              transition: all 0.3s ease;
            "
            >CGU</a
          >
          <span style="color: rgba(255, 255, 255, 0.5)">|</span>
          <a
            href="contact.html"
            onmouseout="this.style.background='rgba(255,255,255,0.1)'"
            onmouseover="this.style.background='rgba(255,255,255,0.2)'"
            style="
              color: rgba(255, 255, 255, 0.9);
              text-decoration: none;
              margin: 0 10px;
              padding: 8px 12px;
              background: rgba(255, 255, 255, 0.1);
              border-radius: 5px;
              transition: all 0.3s ease;
            "
            >Contact</a
          >
        </div>
      </footer>
    </div>
    <script src="libs/pdf.js/pdf.min.js"></script>
    <script src="libs/chart.js/chart.min.js"></script>
    <script src="libs/jspdf/jspdf.umd.min.js"></script>

    <script src="script.js"></script>
  </body>
</html>
